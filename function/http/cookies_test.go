package http

import (
	"fmt"
	"testing"

	"github.com/stretchr/testify/assert"
)

var c = &fnRewriteCookies{}

func TestRewriteCookies(t *testing.T) {
	cookies := []interface{}{"lo=; Path=/; Expires=Wed, 01 Jan 1800 00:00:00 GMT; Secure", "tsc=UcRKVG68jCDooeFgivLAlRq0G19IUSwNmAjOJHAH07j2fi1f1yHC39F2IL5v0z3F0p2WonFJ04wIMs8M6ML74Xj3dhgEry62/uvoUOJWkKSry2slzcfus7+YAYq3AZPhMm0bckU3d2zokFu9vtk1NJJriq4cCe/MwpKLOAUiaoQ1qqIOVSj7C3qa639PCZkLK/1q0RSVRb4r0VICW0ZoceG5m/AAstT+Iw5mDLIwwbkG4n+YiyvVHtOeMJw6JWgpgKbYkTcigdL2DmxfdNCTkQ9mMYobq8huxf34OwGkFr3EIcfioEoJ/GZawTIMc4Wq9ixpDpdZfugPXZ1tM5jsuvG5TehOMcZQ0z0FS7zrLlre4pid1fln8jG3jWZcZSW6YBTmv98AOg5hQvjqaQADgEVVmlKMv0cVc42awRL18/jpW+jWEpQr23ecYJsVc0c02iymZbLehILWjc4Sqe4eIavzz7EQyiNlwsOAT1r2Ln90Rc2nUS11MM3ASCSA+Wapal05HH6BJHqrhR5qnHMu6cwJK+z6nn9kDW714KIDyiNHIuz9I9LtTUnvdCUvp07EzS7dqYQfWoeXGt7o+cT/Y1mI66tSe5h3HZHy+27k77DvqrHbkZjKHDpPi95Nke+ijW8ct+E+X+ws0W2TxveF21ridYHhASil/j6skJinViNSBOf5N1073SZbll2JfbCjmpblIn8yWmesoPOl5Q60eqe9QbwfJaRel77NIHKhtN35F5lcVXDmv3V8q/CIkQA7a8O7aHGGV1411k0LEJ53HbphpjMZ8pQKD4ixo8vBa07S8fTSL0egc/Sj9mz4bVhSFghi7JhJ62p23CT6NG0FRYFfoLn4+tN5wEoS8G31dDJgwVzF74oos+qsIc9bSIMuyFQgYIHSAV0RSGGw7hP6ymfhFUdsPNWqjEYhq8dZU9GXqw3+qe4SUzNVJPu5+HztCo3fvPbs/hkgGC5j29uvoOhAG51BlEWnWFeux4Q8AtWQkbtcMz6h1Y5kHhVoAHXliXFnkZSMX6Uz8PH+AjfikAXYbNUCzXkoC/0UP2tYAmFBYvdzr5HauX7FP9LJAEVB2xfPTadhilC/2n8KkfEahf3LgJwwaTNkI2HMAn/m+s3bHgkT+i0XESDWp/z+kWBYoKKH8luPB9WKmLoHDhjjqNTaaARK51/SB9TDiD/FKUnH8WUmJKaTRCVUsWIoCOsP8FmFxBNEiUbiv9A/sYy8dHC6CIeCXYihhd3z4og08T2Q7oDzE6uksjR7z0tEZcLoiA035fowBO0hk22aCmqbfP3nBGYm/v9ZIlCVJfdTfxVWcpEC8ziya0hMb0BNB9YV; Path=/; Domain=cloud.tibco.com; HttpOnly; Secure", "domain=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; Path=/; Max-Age=86399; HttpOnly; Secure"}
	final, err := c.Eval(cookies, "domain", "mashery.com", "/mashery-path/")
	assert.Nil(t, err)
	fmt.Println(final)
	assert.Equal(t, 3, 3)
}
